{"ast":null,"code":"export const createLoginPromiseThunk = (type, promiseCreator) => {\n  const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n  return param => async dispatch => {\n    dispatch({\n      type\n    });\n\n    try {\n      const user = await promiseCreator(param.id);\n\n      if (!user) {\n        return dispatch({\n          type: ERROR,\n          payload: \"Error: Invalid user or password fail\"\n        });\n      } else {\n        user.password === param.password ? dispatch({\n          type: SUCCESS,\n          payload: user\n        }) : dispatch({\n          type: ERROR,\n          payload: \"Error: Invalid user or password fail\"\n        });\n      }\n    } catch (e) {\n      dispatch({\n        type: ERROR,\n        payload: e.toString()\n      });\n    }\n  };\n};\nexport const CreateIdPromiseThunk = (type, promiseCreator) => {\n  const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n  return param => async dispatch => {\n    dispatch({\n      type\n    });\n\n    if (param.password.lenth < 5) {\n      return dispatch({\n        type: ERROR,\n        payload: \"Error: password should be at least 5 characters\"\n      });\n    }\n\n    try {\n      const payload = await promiseCreator(param);\n      dispatch({\n        type: SUCCESS,\n        payload\n      });\n    } catch (e) {\n      dispatch({\n        type: ERROR,\n        payload: `Error: ${param.username} already exists`\n      });\n    }\n  };\n};\n_c = CreateIdPromiseThunk;\nexport const userReducerUtils = {\n  initial: (initialData = null) => ({\n    loading: false,\n    login: false,\n    data: null,\n    error: null\n  }),\n  loading: (prevState = null) => ({\n    loading: true,\n    login: false,\n    data: prevState,\n    error: null\n  }),\n  login_success: payload => ({\n    loading: false,\n    login: true,\n    data: payload,\n    error: null\n  })\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateIdPromiseThunk\");","map":{"version":3,"sources":["/Users/keehoonjung/projects/react/dwitter/client/src/util/user_async_utils.js"],"names":["createLoginPromiseThunk","type","promiseCreator","SUCCESS","ERROR","param","dispatch","user","id","payload","password","e","toString","CreateIdPromiseThunk","lenth","username","userReducerUtils","initial","initialData","loading","login","data","error","prevState","login_success"],"mappings":"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","sourcesContent":["export const createLoginPromiseThunk = (type, promiseCreator) => {\n  const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n\n  return (param) => async (dispatch) => {\n    dispatch({ type });\n    try {\n      const user = await promiseCreator(param.id);\n      if (!user) {\n        return dispatch({\n          type: ERROR,\n          payload: \"Error: Invalid user or password fail\",\n        });\n      } else {\n        user.password === param.password\n          ? dispatch({ type: SUCCESS, payload: user })\n          : dispatch({\n              type: ERROR,\n              payload: \"Error: Invalid user or password fail\",\n            });\n      }\n    } catch (e) {\n      dispatch({ type: ERROR, payload: e.toString() });\n    }\n  };\n};\n\nexport const CreateIdPromiseThunk = (type, promiseCreator) => {\n  const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n  return (param) => async (dispatch) => {\n    dispatch({ type });\n    if (param.password.lenth < 5) {\n      return dispatch({\n        type: ERROR,\n        payload: \"Error: password should be at least 5 characters\",\n      });\n    }\n    try {\n      const payload = await promiseCreator(param);\n      dispatch({ type: SUCCESS, payload });\n    } catch (e) {\n      dispatch({\n        type: ERROR,\n        payload: `Error: ${param.username} already exists`,\n      });\n    }\n  };\n};\n\nexport const userReducerUtils = {\n  initial: (initialData = null) => ({\n    loading: false,\n    login: false,\n    data: null,\n    error: null,\n  }),\n  loading: (prevState = null) => ({\n    loading: true,\n    login: false,\n    data: prevState,\n    error: null,\n  }),\n  login_success: (payload) => ({\n    loading: false,\n    login: true,\n    data: payload,\n    error: null,\n  }),\n};\n"]},"metadata":{},"sourceType":"module"}