{"ast":null,"code":"import { CreateIdPromiseThunk, createLoginPromiseThunk, userHandleAsyncActions, userReducerUtils } from \"../util/user_async_utils\";\nimport HttpClient from \"../network/http\";\nimport UserService from \"../api/user\";\nimport TokenStorage from \"../db/token\";\nconst baseUrl = \"http://localhost:8080\";\nconst httpClient = new HttpClient(baseUrl);\nconst tokenStorage = new TokenStorage();\nconst userService = new UserService(httpClient, tokenStorage);\nconst initialToken = tokenStorage.getToken();\nconst LOGIN_ID = \"LOGIN_ID\";\nconst LOGIN_ID_SUCCESS = \"LOGIN_ID_SUCCESS\";\nconst LOGIN_ID_ERROR = \"LOGIN_ID_ERROR\";\nconst LOGOUT_ID = \"LOGOUT_ID\";\nconst LOGOUT_ID_SUCCESS = \"LOGOUT_ID_SUCCESS\";\nconst LOGOUT_ID_ERROR = \"LOGOUT_ID_ERROR\";\nconst CREATE_ID = \"CREATE_ID\";\nconst CREATE_ID_SUCCESS = \"CREATE_ID_SUCCESS\";\nconst CREATE_ID_ERROR = \"CREATE_ID_ERROR\";\nconst ME = \"ME\";\nexport const createId = CreateIdPromiseThunk(CREATE_ID, userService.signUp);\nexport const loginId = createLoginPromiseThunk(LOGIN_ID, userService.login);\nexport const logoutId = () => dipatch => {\n  userService.logout();\n  dipatch({\n    type: LOGOUT_ID_SUCCESS\n  });\n};\nexport const me = () => async dipatch => {\n  const payload = await userService.me();\n  dipatch({\n    type: ME,\n    payload\n  });\n};\nconst initialState = userReducerUtils.initial(initialToken);\nexport default function users(state = initialState, action) {\n  switch (action.type) {\n    case LOGIN_ID:\n    case LOGIN_ID_SUCCESS:\n    case LOGIN_ID_ERROR:\n      return userHandleAsyncActions(LOGIN_ID, \"login\")(state, action);\n\n    case LOGOUT_ID:\n    case LOGOUT_ID_SUCCESS:\n    case LOGOUT_ID_ERROR:\n      return userHandleAsyncActions(LOGOUT_ID, \"logout\")(state, action);\n\n    case CREATE_ID:\n    case CREATE_ID_SUCCESS:\n    case CREATE_ID_ERROR:\n      return userHandleAsyncActions(CREATE_ID, \"login\")(state, action);\n\n    case ME:\n      return { ...state,\n        data: action.payload\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/keehoonjung/projects/react/dwitter/client/src/module/user.js"],"names":["CreateIdPromiseThunk","createLoginPromiseThunk","userHandleAsyncActions","userReducerUtils","HttpClient","UserService","TokenStorage","baseUrl","httpClient","tokenStorage","userService","initialToken","getToken","LOGIN_ID","LOGIN_ID_SUCCESS","LOGIN_ID_ERROR","LOGOUT_ID","LOGOUT_ID_SUCCESS","LOGOUT_ID_ERROR","CREATE_ID","CREATE_ID_SUCCESS","CREATE_ID_ERROR","ME","createId","signUp","loginId","login","logoutId","dipatch","logout","type","me","payload","initialState","initial","users","state","action","data"],"mappings":"AAAA,SACEA,oBADF,EAEEC,uBAFF,EAGEC,sBAHF,EAIEC,gBAJF,QAKO,0BALP;AAMA,OAAOC,UAAP,MAAuB,iBAAvB;AACA,OAAOC,WAAP,MAAwB,aAAxB;AACA,OAAOC,YAAP,MAAyB,aAAzB;AAEA,MAAMC,OAAO,GAAG,uBAAhB;AACA,MAAMC,UAAU,GAAG,IAAIJ,UAAJ,CAAeG,OAAf,CAAnB;AACA,MAAME,YAAY,GAAG,IAAIH,YAAJ,EAArB;AACA,MAAMI,WAAW,GAAG,IAAIL,WAAJ,CAAgBG,UAAhB,EAA4BC,YAA5B,CAApB;AAEA,MAAME,YAAY,GAAGF,YAAY,CAACG,QAAb,EAArB;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,gBAAgB,GAAG,kBAAzB;AACA,MAAMC,cAAc,GAAG,gBAAvB;AAEA,MAAMC,SAAS,GAAG,WAAlB;AACA,MAAMC,iBAAiB,GAAG,mBAA1B;AACA,MAAMC,eAAe,GAAG,iBAAxB;AAEA,MAAMC,SAAS,GAAG,WAAlB;AACA,MAAMC,iBAAiB,GAAG,mBAA1B;AACA,MAAMC,eAAe,GAAG,iBAAxB;AAEA,MAAMC,EAAE,GAAG,IAAX;AAEA,OAAO,MAAMC,QAAQ,GAAGvB,oBAAoB,CAACmB,SAAD,EAAYT,WAAW,CAACc,MAAxB,CAArC;AAEP,OAAO,MAAMC,OAAO,GAAGxB,uBAAuB,CAACY,QAAD,EAAWH,WAAW,CAACgB,KAAvB,CAAvC;AAEP,OAAO,MAAMC,QAAQ,GAAG,MAAOC,OAAD,IAAa;AACzClB,EAAAA,WAAW,CAACmB,MAAZ;AACAD,EAAAA,OAAO,CAAC;AAAEE,IAAAA,IAAI,EAAEb;AAAR,GAAD,CAAP;AACD,CAHM;AAKP,OAAO,MAAMc,EAAE,GAAG,MAAM,MAAOH,OAAP,IAAmB;AACzC,QAAMI,OAAO,GAAG,MAAMtB,WAAW,CAACqB,EAAZ,EAAtB;AACAH,EAAAA,OAAO,CAAC;AAAEE,IAAAA,IAAI,EAAER,EAAR;AAAYU,IAAAA;AAAZ,GAAD,CAAP;AACD,CAHM;AAKP,MAAMC,YAAY,GAAG9B,gBAAgB,CAAC+B,OAAjB,CAAyBvB,YAAzB,CAArB;AAEA,eAAe,SAASwB,KAAT,CAAeC,KAAK,GAAGH,YAAvB,EAAqCI,MAArC,EAA6C;AAC1D,UAAQA,MAAM,CAACP,IAAf;AACE,SAAKjB,QAAL;AACA,SAAKC,gBAAL;AACA,SAAKC,cAAL;AACE,aAAOb,sBAAsB,CAACW,QAAD,EAAW,OAAX,CAAtB,CAA0CuB,KAA1C,EAAiDC,MAAjD,CAAP;;AACF,SAAKrB,SAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,eAAL;AACE,aAAOhB,sBAAsB,CAACc,SAAD,EAAY,QAAZ,CAAtB,CAA4CoB,KAA5C,EAAmDC,MAAnD,CAAP;;AACF,SAAKlB,SAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,eAAL;AACE,aAAOnB,sBAAsB,CAACiB,SAAD,EAAY,OAAZ,CAAtB,CAA2CiB,KAA3C,EAAkDC,MAAlD,CAAP;;AACF,SAAKf,EAAL;AACE,aAAO,EACL,GAAGc,KADE;AAELE,QAAAA,IAAI,EAAED,MAAM,CAACL;AAFR,OAAP;;AAIF;AACE,aAAOI,KAAP;AAnBJ;AAqBD","sourcesContent":["import {\n  CreateIdPromiseThunk,\n  createLoginPromiseThunk,\n  userHandleAsyncActions,\n  userReducerUtils,\n} from \"../util/user_async_utils\";\nimport HttpClient from \"../network/http\";\nimport UserService from \"../api/user\";\nimport TokenStorage from \"../db/token\";\n\nconst baseUrl = \"http://localhost:8080\";\nconst httpClient = new HttpClient(baseUrl);\nconst tokenStorage = new TokenStorage();\nconst userService = new UserService(httpClient, tokenStorage);\n\nconst initialToken = tokenStorage.getToken();\n\nconst LOGIN_ID = \"LOGIN_ID\";\nconst LOGIN_ID_SUCCESS = \"LOGIN_ID_SUCCESS\";\nconst LOGIN_ID_ERROR = \"LOGIN_ID_ERROR\";\n\nconst LOGOUT_ID = \"LOGOUT_ID\";\nconst LOGOUT_ID_SUCCESS = \"LOGOUT_ID_SUCCESS\";\nconst LOGOUT_ID_ERROR = \"LOGOUT_ID_ERROR\";\n\nconst CREATE_ID = \"CREATE_ID\";\nconst CREATE_ID_SUCCESS = \"CREATE_ID_SUCCESS\";\nconst CREATE_ID_ERROR = \"CREATE_ID_ERROR\";\n\nconst ME = \"ME\";\n\nexport const createId = CreateIdPromiseThunk(CREATE_ID, userService.signUp);\n\nexport const loginId = createLoginPromiseThunk(LOGIN_ID, userService.login);\n\nexport const logoutId = () => (dipatch) => {\n  userService.logout();\n  dipatch({ type: LOGOUT_ID_SUCCESS });\n};\n\nexport const me = () => async (dipatch) => {\n  const payload = await userService.me();\n  dipatch({ type: ME, payload });\n};\n\nconst initialState = userReducerUtils.initial(initialToken);\n\nexport default function users(state = initialState, action) {\n  switch (action.type) {\n    case LOGIN_ID:\n    case LOGIN_ID_SUCCESS:\n    case LOGIN_ID_ERROR:\n      return userHandleAsyncActions(LOGIN_ID, \"login\")(state, action);\n    case LOGOUT_ID:\n    case LOGOUT_ID_SUCCESS:\n    case LOGOUT_ID_ERROR:\n      return userHandleAsyncActions(LOGOUT_ID, \"logout\")(state, action);\n    case CREATE_ID:\n    case CREATE_ID_SUCCESS:\n    case CREATE_ID_ERROR:\n      return userHandleAsyncActions(CREATE_ID, \"login\")(state, action);\n    case ME:\n      return {\n        ...state,\n        data: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}