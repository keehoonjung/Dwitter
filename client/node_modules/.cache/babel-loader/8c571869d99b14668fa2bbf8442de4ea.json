{"ast":null,"code":"import * as tweetsAPI from \"../api/tweets\";\nimport { createPromiseThunk, createPromiseThunkById, handleAsyncActions, handleAsyncPostActions, reducerUtils } from \"../util/async_utils\";\nconst GET_TWEETS = \"GET_TWEETS\";\nconst GET_TWEETS_SUCCESS = \"GET_TWEETS_SUCCESS\";\nconst GET_TWEETS_ERROR = \"GET_TWEETS_ERROR\";\nconst GET_TWEET = \"GET_TWEET\";\nconst GET_TWEET_SUCCESS = \"GET_TWEET_SUCCESS\";\nconst GET_TWEET_ERROR = \"GET_TWEET_ERROR\";\nconst POST_TWEET = \"POST_TWEET\";\nconst POST_TWEET_SUCCESS = \"POST_TWEET_SUCCESS\";\nconst POST_TWEET_ERROR = \"POST_TWEET_ERROR\";\nconst DELETE_TWEET = \"DELETE_TWEET\";\nconst DELETE_TWEET_SUCCESS = \"DELETE_TWEET_SUCCESS\";\nconst DELETE_TWEET_ERROR = \"DELETE_TWEET_ERROR\";\nconst UPDATE_TWEET = \"UPDATE_TWEET\";\nexport const getTweets = createPromiseThunk(GET_TWEETS, tweetsAPI.getTweets);\nexport const getTweet = createPromiseThunkById(GET_TWEET, tweetsAPI.getTweetById);\nexport const postTweet = createPromiseThunk(POST_TWEET, tweetsAPI.postTweet);\nexport const deleteTweet = createPromiseThunkById(DELETE_TWEETm, tweetsAPI.deleteTweet);\nexport const updateTweet = (id, text) => async dispatch => {\n  try {\n    const payload = await tweetsAPI.updateTweet(id, text);\n    dispatch({\n      type: UPDATE_TWEET,\n      payload,\n      meta: id\n    });\n  } catch (e) {\n    console.log(e);\n  }\n};\nconst initialState = {\n  posts: reducerUtils.initial(),\n  post: reducerUtils.initial()\n};\nexport default function tweets(state = initialState, action) {\n  switch (action.type) {\n    case GET_TWEETS:\n    case GET_TWEETS_SUCCESS:\n    case GET_TWEETS_ERROR:\n      return handleAsyncActions(GET_TWEETS, \"posts\")(state, action);\n\n    case GET_TWEET:\n    case GET_TWEET_SUCCESS:\n    case GET_TWEET_ERROR:\n      return handleAsyncActions(GET_TWEET, \"post\")(state, action);\n\n    case POST_TWEET:\n    case POST_TWEET_SUCCESS:\n    case POST_TWEET_ERROR:\n      return handleAsyncPostActions(POST_TWEET, \"posts\")(state, action);\n\n    case DELETE_TWEET:\n      return { ...state,\n        posts: { ...state.posts,\n          data: state.posts.data ? state.posts.data.filter(tweet => tweet.id !== action.payload) : null\n        }\n      };\n\n    case UPDATE_TWEET:\n      return { ...state,\n        posts: { ...state.posts,\n          data: state.posts.data ? state.posts.data.map(tweet => {\n            if (tweet.id !== action.meta) {\n              return tweet;\n            }\n\n            return action.payload;\n          }) : null\n        }\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/keehoonjung/projects/react/dwitter/client/src/module/tweets.js"],"names":["tweetsAPI","createPromiseThunk","createPromiseThunkById","handleAsyncActions","handleAsyncPostActions","reducerUtils","GET_TWEETS","GET_TWEETS_SUCCESS","GET_TWEETS_ERROR","GET_TWEET","GET_TWEET_SUCCESS","GET_TWEET_ERROR","POST_TWEET","POST_TWEET_SUCCESS","POST_TWEET_ERROR","DELETE_TWEET","DELETE_TWEET_SUCCESS","DELETE_TWEET_ERROR","UPDATE_TWEET","getTweets","getTweet","getTweetById","postTweet","deleteTweet","DELETE_TWEETm","updateTweet","id","text","dispatch","payload","type","meta","e","console","log","initialState","posts","initial","post","tweets","state","action","data","filter","tweet","map"],"mappings":"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","sourcesContent":["import * as tweetsAPI from \"../api/tweets\";\nimport {\n  createPromiseThunk,\n  createPromiseThunkById,\n  handleAsyncActions,\n  handleAsyncPostActions,\n  reducerUtils,\n} from \"../util/async_utils\";\n\nconst GET_TWEETS = \"GET_TWEETS\";\nconst GET_TWEETS_SUCCESS = \"GET_TWEETS_SUCCESS\";\nconst GET_TWEETS_ERROR = \"GET_TWEETS_ERROR\";\n\nconst GET_TWEET = \"GET_TWEET\";\nconst GET_TWEET_SUCCESS = \"GET_TWEET_SUCCESS\";\nconst GET_TWEET_ERROR = \"GET_TWEET_ERROR\";\n\nconst POST_TWEET = \"POST_TWEET\";\nconst POST_TWEET_SUCCESS = \"POST_TWEET_SUCCESS\";\nconst POST_TWEET_ERROR = \"POST_TWEET_ERROR\";\n\nconst DELETE_TWEET = \"DELETE_TWEET\";\nconst DELETE_TWEET_SUCCESS = \"DELETE_TWEET_SUCCESS\";\nconst DELETE_TWEET_ERROR = \"DELETE_TWEET_ERROR\";\n\nconst UPDATE_TWEET = \"UPDATE_TWEET\";\n\nexport const getTweets = createPromiseThunk(GET_TWEETS, tweetsAPI.getTweets);\nexport const getTweet = createPromiseThunkById(\n  GET_TWEET,\n  tweetsAPI.getTweetById\n);\nexport const postTweet = createPromiseThunk(POST_TWEET, tweetsAPI.postTweet);\n\nexport const deleteTweet = createPromiseThunkById(\n  DELETE_TWEETm,\n  tweetsAPI.deleteTweet\n);\n\nexport const updateTweet = (id, text) => async (dispatch) => {\n  try {\n    const payload = await tweetsAPI.updateTweet(id, text);\n    dispatch({ type: UPDATE_TWEET, payload, meta: id });\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nconst initialState = {\n  posts: reducerUtils.initial(),\n  post: reducerUtils.initial(),\n};\n\nexport default function tweets(state = initialState, action) {\n  switch (action.type) {\n    case GET_TWEETS:\n    case GET_TWEETS_SUCCESS:\n    case GET_TWEETS_ERROR:\n      return handleAsyncActions(GET_TWEETS, \"posts\")(state, action);\n    case GET_TWEET:\n    case GET_TWEET_SUCCESS:\n    case GET_TWEET_ERROR:\n      return handleAsyncActions(GET_TWEET, \"post\")(state, action);\n    case POST_TWEET:\n    case POST_TWEET_SUCCESS:\n    case POST_TWEET_ERROR:\n      return handleAsyncPostActions(POST_TWEET, \"posts\")(state, action);\n    case DELETE_TWEET:\n      return {\n        ...state,\n        posts: {\n          ...state.posts,\n          data: state.posts.data\n            ? state.posts.data.filter((tweet) => tweet.id !== action.payload)\n            : null,\n        },\n      };\n    case UPDATE_TWEET:\n      return {\n        ...state,\n        posts: {\n          ...state.posts,\n          data: state.posts.data\n            ? state.posts.data.map((tweet) => {\n                if (tweet.id !== action.meta) {\n                  return tweet;\n                }\n                return action.payload;\n              })\n            : null,\n        },\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}